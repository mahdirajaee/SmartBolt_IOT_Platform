<!-- Firebase SDK - Add this before your other JavaScript files -->
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-app.js"></script>
<script src="https://www.gstatic.com/firebasejs/8.10.1/firebase-auth.js"></script>

<!-- Your own JavaScript files -->
<script src="js/utils.js"></script>
<script src="js/api.js"></script>
<script src="js/auth.js"></script>
<!-- Other page-specific scripts -->
<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Smart IoT Bolt - Dashboard</title>
    <link rel="stylesheet" href="css/main.css">
    <link rel="stylesheet" href="css/dashboard.css">
    <link rel="stylesheet" href="css/charts.css">
    <link rel="stylesheet" href="css/animations.css">
    <link rel="stylesheet" href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/6.5.1/css/all.min.css">
</head>
<body>
    <div class="dashboard-container">
        <!-- Sidebar -->
        <aside class="sidebar">
            <div class="sidebar-header">
                <div class="logo-container">
                    <i class="fas fa-bolt logo-icon"></i>
                    <h1>Smart Bolt</h1>
                </div>
                <button id="sidebar-toggle" class="sidebar-toggle">
                    <i class="fas fa-bars"></i>
                </button>
            </div>
            
            <nav class="sidebar-nav">
                <ul>
                    <li class="nav-item active">
                        <a href="dashboard.html">
                            <i class="fas fa-tachometer-alt"></i>
                            <span>Dashboard</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="pipelines.html">
                            <i class="fas fa-project-diagram"></i>
                            <span>Pipelines</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="alerts.html">
                            <i class="fas fa-bell"></i>
                            <span>Alerts</span>
                            <span class="badge alert-badge">3</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="analytics.html">
                            <i class="fas fa-chart-line"></i>
                            <span>Analytics</span>
                        </a>
                    </li>
                    <li class="nav-item">
                        <a href="settings.html">
                            <i class="fas fa-cog"></i>
                            <span>Settings</span>
                        </a>
                    </li>
                </ul>
            </nav>
            
            <div class="sidebar-footer">
                <button id="logout-btn" class="logout-btn">
                    <i class="fas fa-sign-out-alt"></i>
                    <span>Logout</span>
                </button>
            </div>
        </aside>
        
        <!-- Main Content -->
        <main class="main-content">
            <!-- Top Navigation -->
            <header class="top-nav">
                <div class="page-title">
                    <h2>Dashboard</h2>
                    <div class="breadcrumb">
                        <span>Home</span>
                        <i class="fas fa-chevron-right"></i>
                        <span>Dashboard</span>
                    </div>
                </div>
                
                <div class="top-nav-actions">
                    <div class="theme-toggle">
                        <input type="checkbox" id="theme-switch" class="theme-switch">
                        <label for="theme-switch" class="theme-switch-label">
                            <i class="fas fa-sun"></i>
                            <i class="fas fa-moon"></i>
                            <span class="switch-ball"></span>
                        </label>
                    </div>
                    
                    <div class="notification-bell">
                        <i class="fas fa-bell"></i>
                        <span class="badge notification-badge">3</span>
                        
                        <div class="notification-dropdown">
                            <div class="notification-header">
                                <h3>Notifications</h3>
                                <a href="#" class="mark-all-read">Mark all as read</a>
                            </div>
                            
                            <div class="notification-list">
                                <!-- Notifications will be loaded here -->
                            </div>
                            
                            <div class="notification-footer">
                                <a href="alerts.html">View all alerts</a>
                            </div>
                        </div>
                    </div>
                    
                    <div class="user-profile">
                        <div class="user-info">
                            <span class="user-name">John Doe</span>
                            <span class="user-role">Administrator</span>
                        </div>
                        <div class="user-avatar">
                            <img src="assets/img/avatar.png" alt="User Avatar">
                        </div>
                        
                        <div class="user-dropdown">
                            <ul>
                                <li><a href="profile.html"><i class="fas fa-user"></i> Profile</a></li>
                                <li><a href="settings.html"><i class="fas fa-cog"></i> Settings</a></li>
                                <li><a href="#" id="user-logout-btn"><i class="fas fa-sign-out-alt"></i> Logout</a></li>
                            </ul>
                        </div>
                    </div>
                </div>
            </header>
            
            <!-- Dashboard Content -->
            <div class="dashboard-content">
                <!-- Status Cards -->
                <div class="status-cards">
                    <div class="card status-card">
                        <div class="card-icon healthy">
                            <i class="fas fa-bolt"></i>
                        </div>
                        <div class="card-info">
                            <h3>Smart Bolts</h3>
                            <div class="card-value">24</div>
                            <div class="card-subtitle">22 Online</div>
                        </div>
                    </div>
                    
                    <div class="card status-card">
                        <div class="card-icon warning">
                            <i class="fas fa-thermometer-half"></i>
                        </div>
                        <div class="card-info">
                            <h3>Temperature</h3>
                            <div class="card-value">78.5Â°C</div>
                            <div class="card-subtitle">Avg. across pipelines</div>
                        </div>
                    </div>
                    
                    <div class="card status-card">
                        <div class="card-icon critical">
                            <i class="fas fa-tachometer-alt"></i>
                        </div>
                        <div class="card-info">
                            <h3>Pressure</h3>
                            <div class="card-value">9.2 bar</div>
                            <div class="card-subtitle">Avg. across pipelines</div>
                        </div>
                    </div>
                    
                    <div class="card status-card">
                        <div class="card-icon healthy">
                            <i class="fas fa-bell"></i>
                        </div>
                        <div class="card-info">
                            <h3>Active Alerts</h3>
                            <div class="card-value">3</div>
                            <div class="card-subtitle">2 Critical, 1 Warning</div>
                        </div>
                    </div>
                </div>
                
                <!-- Pipeline Overview -->
                <div class="row">
                    <!-- Pipeline Selection -->
                    <div class="col-12">
                        <div class="card pipeline-selector-card">
                            <div class="card-header">
                                <h3>Pipeline Selection</h3>
                            </div>
                            <div class="card-body">
                                <div class="pipeline-selector">
                                    <select id="pipeline-select" class="custom-select">
                                        <option value="all">All Pipelines</option>
                                        <option value="pipeline001">Pipeline 001</option>
                                        <option value="pipeline002">Pipeline 002</option>
                                        <option value="pipeline003">Pipeline 003</option>
                                    </select>
                                    <button id="refresh-data" class="btn-refresh">
                                        <i class="fas fa-sync-alt"></i>
                                    </button>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Charts & Pipeline Visualization -->
                <div class="row">
                    <!-- Temperature Chart -->
                    <div class="col-6">
                        <div class="card chart-card">
                            <div class="card-header">
                                <h3>Temperature Monitoring</h3>
                                <div class="card-actions">
                                    <button class="btn-card-action" data-timeframe="hour">1h</button>
                                    <button class="btn-card-action active" data-timeframe="day">24h</button>
                                    <button class="btn-card-action" data-timeframe="week">7d</button>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="temperature-chart"></canvas>
                                    <div class="chart-loading">
                                        <div class="spinner">
                                            <i class="fas fa-spinner fa-spin"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="threshold-line warning" style="top: 30%;">
                                    <span>Warning: 85Â°C</span>
                                </div>
                                <div class="threshold-line danger" style="top: 20%;">
                                    <span>Critical: 95Â°C</span>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Pressure Chart -->
                    <div class="col-6">
                        <div class="card chart-card">
                            <div class="card-header">
                                <h3>Pressure Monitoring</h3>
                                <div class="card-actions">
                                    <button class="btn-card-action" data-timeframe="hour">1h</button>
                                    <button class="btn-card-action active" data-timeframe="day">24h</button>
                                    <button class="btn-card-action" data-timeframe="week">7d</button>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="chart-container">
                                    <canvas id="pressure-chart"></canvas>
                                    <div class="chart-loading">
                                        <div class="spinner">
                                            <i class="fas fa-spinner fa-spin"></i>
                                        </div>
                                    </div>
                                </div>
                                <div class="threshold-line warning" style="top: 40%;">
                                    <span>Warning: 8.5 bar</span>
                                </div>
                                <div class="threshold-line danger" style="top: 25%;">
                                    <span>Critical: 9.5 bar</span>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Pipeline Visualization -->
                <div class="row">
                    <div class="col-12">
                        <div class="card pipeline-card">
                            <div class="card-header">
                                <h3>Pipeline Visualization</h3>
                                <div class="card-actions">
                                    <button class="btn-card-action toggle-view active" data-view="schematic">
                                        <i class="fas fa-project-diagram"></i> Schematic
                                    </button>
                                    <button class="btn-card-action toggle-view" data-view="table">
                                        <i class="fas fa-table"></i> Table
                                    </button>
                                </div>
                            </div>
                            <div class="card-body">
                                <div class="pipeline-view schematic-view active">
                                    <div class="pipeline-container" id="pipeline-container">
                                        <!-- Pipeline visualization will be rendered here -->
                                        <div class="pipeline-loading">
                                            <div class="spinner">
                                                <i class="fas fa-spinner fa-spin"></i>
                                            </div>
                                        </div>
                                    </div>
                                </div>
                                
                                <div class="pipeline-view table-view">
                                    <table class="pipeline-table">
                                        <thead>
                                            <tr>
                                                <th>Device ID</th>
                                                <th>Temperature</th>
                                                <th>Pressure</th>
                                                <th>Valve Status</th>
                                                <th>Last Update</th>
                                                <th>Actions</th>
                                            </tr>
                                        </thead>
                                        <tbody id="pipeline-table-body">
                                            <!-- Table rows will be generated here -->
                                        </tbody>
                                    </table>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
                
                <!-- Alert List and Valve Control -->
                <div class="row">
                    <!-- Active Alerts -->
                    <div class="col-8">
                        <div class="card alerts-card">
                            <div class="card-header">
                                <h3>Active Alerts</h3>
                                <button class="btn-view-all">View All</button>
                            </div>
                            <div class="card-body">
                                <div class="alert-list" id="alert-list">
                                    <!-- Alerts will be loaded here -->
                                    <div class="alert-item critical">
                                        <div class="alert-icon">
                                            <i class="fas fa-exclamation-triangle"></i>
                                        </div>
                                        <div class="alert-content">
                                            <div class="alert-title">Critical Temperature</div>
                                            <div class="alert-message">Temperature exceeded 95Â°C on Pipeline 001, Device 010</div>
                                            <div class="alert-time">10 minutes ago</div>
                                        </div>
                                        <div class="alert-actions">
                                            <button class="btn-alert-action resolve">
                                                <i class="fas fa-check"></i>
                                            </button>
                                            <button class="btn-alert-action details">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div class="alert-item warning">
                                        <div class="alert-icon">
                                            <i class="fas fa-exclamation-circle"></i>
                                        </div>
                                        <div class="alert-content">
                                            <div class="alert-title">High Pressure Warning</div>
                                            <div class="alert-message">Pressure approaching critical level on Pipeline 002, Device 020</div>
                                            <div class="alert-time">25 minutes ago</div>
                                        </div>
                                        <div class="alert-actions">
                                            <button class="btn-alert-action resolve">
                                                <i class="fas fa-check"></i>
                                            </button>
                                            <button class="btn-alert-action details">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                    </div>
                                    
                                    <div class="alert-item info">
                                        <div class="alert-icon">
                                            <i class="fas fa-info-circle"></i>
                                        </div>
                                        <div class="alert-content">
                                            <div class="alert-title">Valve Action Required</div>
                                            <div class="alert-message">Maintenance recommended for valve on Pipeline 003, Device 030</div>
                                            <div class="alert-time">1 hour ago</div>
                                        </div>
                                        <div class="alert-actions">
                                            <button class="btn-alert-action resolve">
                                                <i class="fas fa-check"></i>
                                            </button>
                                            <button class="btn-alert-action details">
                                                <i class="fas fa-eye"></i>
                                            </button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                    
                    <!-- Valve Control -->
                    <div class="col-4">
                        <div class="card valve-control-card">
                            <div class="card-header">
                                <h3>Valve Control</h3>
                            </div>
                            <div class="card-body">
                                <div class="valve-control-container">
                                    <div class="valve-selector">
                                        <label for="valve-device-select">Select Device</label>
                                        <select id="valve-device-select" class="custom-select">
                                            <option value="">Select device...</option>
                                            <option value="device010">Pipeline 001 - Device 010</option>
                                            <option value="device020">Pipeline 001 - Device 020</option>
                                            <option value="device030">Pipeline 002 - Device 030</option>
                                        </select>
                                    </div>
                                    
                                    <div class="valve-status">
                                        <div class="status-label">Current Status:</div>
                                        <div class="status-value" id="valve-status">
                                            <span class="status-badge closed">Closed</span>
                                        </div>
                                    </div>
                                    
                                    <div class="valve-controls">
                                        <button id="open-valve" class="btn-valve open">
                                            <i class="fas fa-door-open"></i> Open Valve
                                        </button>
                                        <button id="close-valve" class="btn-valve close">
                                            <i class="fas fa-door-closed"></i> Close Valve
                                        </button>
                                    </div>
                                    
                                    <div class="valve-confirmation hidden" id="valve-confirmation">
                                        <div class="confirmation-message">
                                            Are you sure you want to <span id="valve-action">open</span> the valve?
                                        </div>
                                        <div class="confirmation-buttons">
                                            <button id="confirm-valve-action" class="btn-confirm">Yes, continue</button>
                                            <button id="cancel-valve-action" class="btn-cancel">Cancel</button>
                                        </div>
                                    </div>
                                </div>
                            </div>
                        </div>
                    </div>
                </div>
            </div>
            
            <!-- Footer -->
            <footer class="dashboard-footer">
                <div class="footer-content">
                    <p>&copy; 2025 Smart IoT Bolt - Pipeline Monitoring System</p>
                    <p>Last updated: <span id="last-updated">Just now</span></p>
                </div>
            </footer>
        </main>
    </div>
    
    <!-- Modal Templates -->
    <div class="modal-container" id="alert-details-modal">
        <div class="modal">
            <div class="modal-header">
                <h3>Alert Details</h3>
                <button class="modal-close"><i class="fas fa-times"></i></button>
            </div>
            <div class="modal-body">
                <div class="alert-details">
                    <!-- Alert details will be loaded here -->
                </div>
            </div>
            <div class="modal-footer">
                <button class="btn-primary modal-action-button">Take Action</button>
                <button class="btn-secondary modal-close-button">Close</button>
            </div>
        </div>
    </div>

    <!-- Scripts -->
    <script src="https://cdnjs.cloudflare.com/ajax/libs/Chart.js/3.9.1/chart.min.js"></script>
    <script src="js/utils.js"></script>
    <script src="js/api.js"></script>
    <script src="js/auth.js"></script>
    <script src="js/charts.js"></script>
    <script src="js/dashboard.js"></script>
    <script>
        document.addEventListener('DOMContentLoaded', () => {
            initDashboard();
        });
    </script>
</body>
</html>